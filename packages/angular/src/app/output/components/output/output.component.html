<app-container *ngIf="initialized" class="app-output-container">
  <div *ngIf="noScriptMessage">
    <p>{{noScriptMessage}}</p>

    <button mat-button color="primary" [routerLink]="['/']">Go to compile section</button>
  </div>

  <div *ngIf="!noScriptMessage">
    <button routerLink="/compilation" class="app-back-button" mat-button mat-icon-button color="primary"><mat-icon>arrow_back</mat-icon></button>

    <div *ngIf="!compilationIsConfirmed">
      <p class="app-output-confirmation-text">You are about to compile scripts <strong *ngIf="inlinedScripts">{{inlinedScripts}}</strong></p>

      <button mat-raised-button color="primary" (click)="onClickConfirm($event)"><mat-icon>arrow_right_alt</mat-icon></button>
    </div>

    <div *ngIf="compilationIsConfirmed">
      <mat-progress-bar mode="determinate" [value]="progress" [color]="progressBarColor"></mat-progress-bar>

      <mat-list class="app-output-scripts-list">
        <mat-list-item *ngFor="let script of scripts">
          <div mat-list-icon *ngIf="!isCompiling(script) && !isSuccess(script) && !isError(script)"></div>
          <div mat-list-icon *ngIf="isCompiling(script)"><mat-spinner mode="indeterminate" color="accent" diameter="30"></mat-spinner></div>
          <div mat-list-icon *ngIf="isSuccess(script)"><mat-icon color="primary">check_circle_outline</mat-icon></div>
          <div mat-list-icon *ngIf="isError(script)"><mat-icon color="warn">highlight_off</mat-icon></div>
          <p mat-line>{{script}}</p>
        </mat-list-item>
      </mat-list>

      <div class="app-output-retry">
        <button mat-button color="primary" [disabled]="isCompilingAnyScript" (click)="onClickRetryAll($event)"><mat-icon>replay</mat-icon> Retry</button>
        <button mat-button color="warn" [disabled]="(errorScripts && errorScripts.length === 0) || isCompilingAnyScript" (click)="onClickRetryErrors($event)"><mat-icon>replay</mat-icon> Retry failed</button>
      </div>
    </div>
  </div>

  <div class="app-output-logs-button">
    <app-output-logs></app-output-logs>
  </div>
</app-container>
