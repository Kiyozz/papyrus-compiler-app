<app-container class="app-groups">
  <h1>Groups of scripts</h1>

  <div class="app-groups-add-group-indicator" *ngIf="groups && groups.length === 0"><mat-icon>arrow_downward</mat-icon></div>

  <button class="app-group-add-button" mat-mini-fab color="primary" (click)="onClickAddGroup($event)">
    <mat-icon>add</mat-icon>
  </button>

  <ng-container *ngIf="(groups && groups.length); else noGroups">
    <mat-card *ngFor="let group of groups">
      <mat-card-header>
        <mat-card-title>
          <h3 *ngIf="!isEditingGroup(group)">{{group.name}}</h3>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p *ngIf="!isEditingGroup(group); else editingScripts">{{groupScriptsInlined(group)}}</p>
        <ng-template #editingScripts>
          <mat-form-field>
            <input matInput placeholder="Name" name="editingGroupName" [(ngModel)]="editingGroup.name">
          </mat-form-field>
          <app-choose-scripts label="Scripts" [scripts]="editingGroup.scripts" (save)="editingGroup.scripts = $event"></app-choose-scripts>

          <button mat-raised-button color="primary" (click)="onClickSaveGroup($event)">Save</button>
        </ng-template>
        <div *ngIf="group.scripts.length === 0" class="app-groups-group-inactive" disabled><mat-icon color="warn">block</mat-icon></div>
      </mat-card-content>
      <mat-card-actions *ngIf="!isEditingGroup(group)">
        <button mat-raised-button color="primary" (click)="onClickEditGroup(group, $event)"><mat-icon>edit</mat-icon></button>
        <button mat-raised-button color="warn" (click)="onClickDeleteGroup(group, $event)"><mat-icon>delete</mat-icon></button>
      </mat-card-actions>
    </mat-card>
  </ng-container>
  <ng-template #noGroups>
    <p>You currently have no groups.</p>
  </ng-template>
</app-container>
